{% extends "base.html" %}
{% load humanize %}

{% block title %}BidMarket - Shop & Bid on Premium Products{% endblock %}

{% block content %}
<!-- UI POLISH STYLES: Phase 1 (Skeletons) + Phase 2 (Card Animations) + Phase 3 (Horizontal Carousel) -->
<style>
    /* === LOADING SKELETONS === */
    @keyframes shimmer {
        0% { background-position: -1000px 0; }
        100% { background-position: 1000px 0; }
    }

    .skeleton {
        animation: shimmer 2s infinite linear;
        background: linear-gradient(
            to right,
            #f0f0f0 0%,
            #e0e0e0 20%,
            #f0f0f0 40%,
            #f0f0f0 100%
        );
        background-size: 1000px 100%;
    }

    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .fade-in-up {
        animation: fadeInUp 0.6s ease-out forwards;
    }

    .delay-1 { animation-delay: 0.05s; }
    .delay-2 { animation-delay: 0.1s; }
    .delay-3 { animation-delay: 0.15s; }
    .delay-4 { animation-delay: 0.2s; }
    .delay-5 { animation-delay: 0.25s; }
    .delay-6 { animation-delay: 0.3s; }
    .delay-7 { animation-delay: 0.35s; }
    .delay-8 { animation-delay: 0.4s; }

    /* === CARD ANIMATIONS === */
    .product-card {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .product-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1),
                    0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }

    .product-image {
        transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .product-card:hover .product-image {
        transform: scale(1.08);
    }

    /* Pulsing dot for LIVE badges */
    @keyframes pulse-dot {
        0%, 100% {
            opacity: 1;
            transform: scale(1);
        }
        50% {
            opacity: 0.5;
            transform: scale(1.2);
        }
    }

    .pulse-dot {
        animation: pulse-dot 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }

    .badge {
        transition: all 0.2s ease;
    }

    .badge:hover {
        transform: scale(1.05);
    }

    /* Quick-add button slide up */
    .quick-add-btn {
        transform: translateY(100%);
        opacity: 0;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .product-card:hover .quick-add-btn {
        transform: translateY(0);
        opacity: 1;
    }

    /* Price pulse on hover */
    @keyframes price-pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.05); }
    }

    .product-card:hover .product-price {
        animation: price-pulse 0.5s ease;
    }

    .smooth-transition {
        transition: all 0.3s ease;
    }

    /* Low stock pulse */
    @keyframes stock-pulse {
        0%, 100% {
            background-color: rgb(239, 68, 68);
        }
        50% {
            background-color: rgb(220, 38, 38);
        }
    }

    .low-stock-pulse {
        animation: stock-pulse 2s ease-in-out infinite;
    }

    /* Button ripple effect */
    .btn-ripple {
        position: relative;
        overflow: hidden;
    }

    .btn-ripple::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.5);
        transform: translate(-50%, -50%);
        transition: width 0.6s, height 0.6s;
    }

    .btn-ripple:active::before {
        width: 300px;
        height: 300px;
    }

    /* === HORIZONTAL SCROLL WITH ARROWS === */
    .carousel-wrapper {
        position: relative;
        padding: 0 50px; /* Space for arrows */
    }

    .horizontal-scroll {
        display: flex;
        gap: 1.25rem;
        overflow-x: hidden; /* Hide scrollbar, use arrows only */
        scroll-behavior: smooth;
        padding-bottom: 1rem;
    }

    .horizontal-scroll-item {
        flex: 0 0 auto;
        width: calc(20% - 1rem); /* 5 items = 20% each */
    }

    /* Arrows */
    .scroll-arrow {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        z-index: 10;
        background: white;
        border: 2px solid #e5e7eb;
        border-radius: 50%;
        width: 48px;
        height: 48px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }

    .scroll-arrow:hover {
        background: #f9fafb;
        border-color: #d1d5db;
        box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        transform: translateY(-50%) scale(1.05);
    }

    .scroll-arrow.left {
        left: 0;
    }

    .scroll-arrow.right {
        right: 0;
    }

    .scroll-arrow:disabled {
        opacity: 0.3;
        cursor: not-allowed;
    }

    /* Responsive */
    @media (max-width: 1536px) {
        .horizontal-scroll-item {
            width: calc(25% - 0.9375rem); /* 4 items */
        }
    }

    @media (max-width: 1280px) {
        .horizontal-scroll-item {
            width: calc(33.333% - 0.833rem); /* 3 items */
        }
    }

    @media (max-width: 768px) {
        .horizontal-scroll-item {
            width: calc(50% - 0.625rem); /* 2 items */
        }
        .carousel-wrapper {
            padding: 0 40px;
        }
        .scroll-arrow {
            width: 36px;
            height: 36px;
        }
    }
</style>

<div class="bg-gray-50">

    <!-- Top Promotional Banner -->
    <div class="bg-gradient-to-r from-orange-500 to-orange-600 text-white py-2">
        <div class="max-w-7xl mx-auto px-4 text-center text-sm">
            🎯 <strong>HYBRID MARKETPLACE:</strong> Buy Instantly OR Bid to Save up to 70% | <a href="{% url 'browse' %}" class="underline font-bold">EXPLORE NOW</a>
        </div>
    </div>

    <!-- Search Bar -->
    <div class="bg-white shadow-sm">
        <div class="max-w-7xl mx-auto px-4 py-4">
            <form action="{% url 'browse' %}" method="get" class="flex gap-2">
                <input
                    type="text"
                    name="search"
                    placeholder="Search products, brands and categories"
                    class="flex-1 px-4 py-3 border border-gray-300 rounded focus:outline-none focus:border-orange-500"
                >
                <button type="submit" class="bg-orange-500 text-white px-8 py-3 rounded font-semibold hover:bg-orange-600 transition uppercase">
                    Search
                </button>
            </form>
        </div>
    </div>

    <!-- Main Content -->
    <div class="max-w-[1600px] mx-auto px-4 py-4">
        <div class="flex gap-4">

            <!-- Left Sidebar - Categories -->
            <aside class="w-64 flex-shrink-0 hidden lg:block">
                <div class="bg-white rounded shadow-sm">
                    {% if categories %}
                        <ul>
                            {% for category in categories %}
                            <li class="border-b border-gray-100 last:border-0">
                                <a href="{% url 'category' category.id %}" class="flex items-center gap-3 px-4 py-3 hover:bg-orange-50 transition group">
                                    <svg class="w-5 h-5 text-gray-500 group-hover:text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path>
                                    </svg>
                                    <span class="text-sm text-gray-700 group-hover:text-orange-500 font-medium">{{ category.name }}</span>
                                </a>
                            </li>
                            {% endfor %}
                        </ul>
                    {% else %}
                        <div class="p-4 text-center text-gray-500 text-sm">
                            No categories yet
                        </div>
                    {% endif %}
                </div>

                <!-- Product Type Filter Widget -->
                <div class="bg-white rounded shadow-sm mt-4 p-4">
                    <h3 class="font-bold text-gray-900 mb-3 text-sm uppercase">Shop By Type</h3>
                    <div class="space-y-2">
                        <a href="{% url 'browse' %}?product_type=buy_now" class="flex items-center gap-2 p-2 rounded hover:bg-blue-50 transition group">
                            <div class="w-8 h-8 bg-blue-100 rounded flex items-center justify-center group-hover:bg-blue-200">
                                <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path>
                                </svg>
                            </div>
                            <span class="text-sm font-medium text-gray-700 group-hover:text-blue-600">Buy Now</span>
                        </a>
                        <a href="{% url 'browse' %}?product_type=auction" class="flex items-center gap-2 p-2 rounded hover:bg-red-50 transition group">
                            <div class="w-8 h-8 bg-red-100 rounded flex items-center justify-center group-hover:bg-red-200">
                                <svg class="w-4 h-4 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"></path>
                                </svg>
                            </div>
                            <span class="text-sm font-medium text-gray-700 group-hover:text-red-600">Auctions</span>
                        </a>
                        <a href="{% url 'browse' %}?product_type=both" class="flex items-center gap-2 p-2 rounded hover:bg-purple-50 transition group">
                            <div class="w-8 h-8 bg-purple-100 rounded flex items-center justify-center group-hover:bg-purple-200">
                                <svg class="w-4 h-4 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path>
                                </svg>
                            </div>
                            <span class="text-sm font-medium text-gray-700 group-hover:text-purple-600">Both Options</span>
                        </a>
                    </div>
                </div>

                <!-- How it Works Widget -->
                <div class="bg-white rounded shadow-sm mt-4 p-4">
                    <h3 class="font-bold text-gray-900 mb-3 text-sm uppercase">How It Works</h3>
                    <div class="space-y-3 text-xs text-gray-600">
                        <div>
                            <div class="flex items-center gap-2 mb-1">
                                <span class="bg-blue-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold">1</span>
                                <span class="font-semibold text-blue-600">Buy Now</span>
                            </div>
                            <p class="ml-7">Instant purchase at fixed price</p>
                        </div>
                        <div>
                            <div class="flex items-center gap-2 mb-1">
                                <span class="bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold">2</span>
                                <span class="font-semibold text-red-600">Auctions</span>
                            </div>
                            <p class="ml-7">Pay entry fee, place bid & win!</p>
                        </div>
                        <div>
                            <div class="flex items-center gap-2 mb-1">
                                <span class="bg-purple-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold">3</span>
                                <span class="font-semibold text-purple-600">Both</span>
                            </div>
                            <p class="ml-7">Choose your preferred method</p>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- Center Content with Alpine.js -->
            <main class="flex-1 min-w-0" x-data="{
                loading: true,
                init() {
                    setTimeout(() => { this.loading = false }, 800);
                },
                addToCart(productId, title) {
                    alert('✅ ' + title + ' added to cart!');
                    // API call
                    fetch('/api/cart/add/', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-CSRFToken': '{{ csrf_token }}'
                        },
                        body: JSON.stringify({
                            product_id: productId,
                            quantity: 1
                        })
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            // Update cart count if needed
                            location.reload();
                        }
                    })
                    .catch(error => console.error('Error:', error));
                }
            }">

                <!-- ========== HERO CAROUSEL ========== -->
                {% if hero_slides %}
                <div
                    x-data="heroCarousel()"
                    x-init="startAutoplay()"
                    class="relative overflow-hidden rounded-lg shadow-lg mb-4"
                    style="height: 400px;"
                >
                    <!-- Slides -->
                    {% for slide in hero_slides %}
                    <div
                        x-show="currentSlide === {{ forloop.counter0 }}"
                        x-transition:enter="transition ease-out duration-500"
                        x-transition:enter-start="opacity-0 transform translate-x-full"
                        x-transition:enter-end="opacity-100 transform translate-x-0"
                        x-transition:leave="transition ease-in duration-500"
                        x-transition:leave-start="opacity-100 transform translate-x-0"
                        x-transition:leave-end="opacity-0 transform -translate-x-full"
                        class="absolute inset-0 w-full h-full"
                    >
                        <a href="{% url 'auction_detail' slide.id %}" class="block w-full h-full">
                            <!-- Background Image -->
                            <div class="absolute inset-0 bg-gray-900">
                                {% if slide.main_image %}
                                <img
                                    src="{{ slide.main_image.url }}"
                                    alt="{{ slide.title }}"
                                    class="w-full h-full object-cover"
                                >

                                {% else %}
                                <div class="absolute inset-0 bg-gradient-to-r from-indigo-600 to-purple-600"></div>
                                {% endif %}
                            </div>

                            <!-- Content Overlay -->
                            <div class="relative z-10 h-full flex items-center">
                                <div class="px-8 w-full">
                                    <div class="max-w-2xl">
                                        <!-- Featured Badge -->
                                        <div class="flex items-center gap-2 mb-4">
                                            <span class="bg-yellow-400 text-gray-900 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider">
                                                ⭐ Featured Deal
                                            </span>
                                            {% if slide.discount_percentage > 0 %}
                                            <span class="bg-red-500 text-white px-3 py-1 rounded-full text-xs font-bold uppercase">
                                                {{ slide.discount_percentage }}% OFF
                                            </span>
                                            {% endif %}
                                        </div>

                                        <!-- Title -->
                                        <h2 class="text-4xl md:text-5xl font-bold text-white mb-4 leading-tight">
                                            {{ slide.title }}
                                        </h2>

                                        <!-- Description -->
                                        <p class="text-lg text-gray-100 mb-6 line-clamp-2">
                                            {{ slide.description|truncatewords:20 }}
                                        </p>

                                        <!-- Price & CTA -->
                                        <div class="flex items-center gap-4 flex-wrap">
                                            {% if slide.product_type == 'buy_now' or slide.product_type == 'both' %}
                                            <div class="text-white">
                                                <span class="text-3xl font-bold">KSh {{ slide.buy_now_price|floatformat:0 }}</span>
                                            </div>
                                            {% endif %}

                                            {% if slide.product_type == 'auction' or slide.product_type == 'both' %}
                                            <div class="text-white">
                                                <span class="text-sm uppercase tracking-wide">Starting Bid</span>
                                                <span class="text-2xl font-bold ml-2">KSh {{ slide.base_price|floatformat:0 }}</span>
                                            </div>
                                            {% endif %}
                                        </div>

                                        <!-- CTA Button -->
                                        <div class="mt-6">
                                            <span class="inline-block bg-white text-indigo-600 px-8 py-4 rounded-lg font-bold text-lg hover:bg-gray-100 transition shadow-lg">
                                                {% if slide.product_type == 'buy_now' %}
                                                    Shop Now →
                                                {% elif slide.product_type == 'auction' %}
                                                    Bid Now →
                                                {% else %}
                                                    View Deal →
                                                {% endif %}
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </div>
                    {% endfor %}

                    <!-- Previous Button -->
                    <button
                        @click="previousSlide()"
                        class="absolute left-4 top-1/2 -translate-y-1/2 z-20 bg-white/80 hover:bg-white text-gray-800 rounded-full p-3 shadow-lg transition"
                    >
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                        </svg>
                    </button>

                    <!-- Next Button -->
                    <button
                        @click="nextSlide()"
                        class="absolute right-4 top-1/2 -translate-y-1/2 z-20 bg-white/80 hover:bg-white text-gray-800 rounded-full p-3 shadow-lg transition"
                    >
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                        </svg>
                    </button>

                    <!-- Dot Indicators -->
                    <div class="absolute bottom-6 left-1/2 -translate-x-1/2 z-20 flex gap-2">
                        {% for slide in hero_slides %}
                        <button
                            @click="goToSlide({{ forloop.counter0 }})"
                            class="w-3 h-3 rounded-full transition"
                            :class="currentSlide === {{ forloop.counter0 }} ? 'bg-white scale-125' : 'bg-white/50 hover:bg-white/75'"
                        ></button>
                        {% endfor %}
                    </div>
                </div>
                {% else %}
                <!-- Fallback: Show SHOP YOUR WAY if no hero slides -->
                <div class="bg-gradient-to-r from-orange-500 via-red-500 to-pink-500 rounded shadow-sm mb-4 overflow-hidden">
                    <div class="flex items-center justify-between p-8 md:p-12">
                        <div class="text-white flex-1">
                            <h1 class="text-3xl md:text-4xl font-bold mb-2">SHOP YOUR WAY</h1>
                            <p class="text-lg mb-4 opacity-90">BUY INSTANTLY OR BID TO SAVE BIG</p>
                            <div class="flex gap-3 mb-4">
                                <div class="bg-white text-orange-600 px-4 py-2 rounded-lg">
                                    <div class="text-xs font-medium">Buy Now</div>
                                    <div class="text-lg font-bold">Fixed Price</div>
                                </div>
                                <div class="bg-white text-red-600 px-4 py-2 rounded-lg">
                                    <div class="text-xs font-medium">Auctions</div>
                                    <div class="text-lg font-bold">50-70% OFF</div>
                                </div>
                            </div>
                            <div class="flex gap-2">
                                <a href="{% url 'browse' %}?product_type=buy_now" class="inline-block bg-white text-orange-600 px-6 py-3 rounded font-bold hover:bg-gray-100 transition">
                                    SHOP NOW
                                </a>
                                <a href="{% url 'browse' %}?product_type=auction" class="inline-block bg-transparent border-2 border-white text-white px-6 py-3 rounded font-bold hover:bg-white hover:text-orange-600 transition">
                                    BID NOW
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                {% endif %}
                <!-- ========== END HERO CAROUSEL ========== -->

                <!-- Quick Stats Bar -->
                {% if buy_now_products or auction_products or both_products %}
                <div class="grid grid-cols-3 gap-4 mb-4">
                    <div class="bg-white rounded shadow-sm p-4 text-center">
                        <div class="text-2xl font-bold text-blue-600">{{ buy_now_products|length|default:0 }}</div>
                        <div class="text-xs text-gray-600 uppercase">Buy Now Items</div>
                    </div>
                    <div class="bg-white rounded shadow-sm p-4 text-center">
                        <div class="text-2xl font-bold text-red-600">{{ auction_products|length|default:0 }}</div>
                        <div class="text-xs text-gray-600 uppercase">Live Auctions</div>
                    </div>
                    <div class="bg-white rounded shadow-sm p-4 text-center">
                        <div class="text-2xl font-bold text-purple-600">{{ both_products|length|default:0 }}</div>
                        <div class="text-xs text-gray-600 uppercase">Dual Options</div>
                    </div>
                </div>
                {% endif %}

                <!-- ==================== LIVE AUCTIONS SECTION (FIRST!) ==================== -->
                <!-- ==================== LIVE AUCTIONS SECTION - FULL WIDTH CAROUSEL ==================== -->
                {% if auction_products %}
                <section class="bg-white rounded shadow-sm mb-4">
                    <div class="border-b px-4 py-3 flex items-center justify-between bg-red-50">
                        <div class="flex items-center gap-2">
                            <svg class="w-5 h-5 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"></path>
                            </svg>
                            <h2 class="font-bold text-gray-900 uppercase">Live Auctions - Bid to Win</h2>
                        </div>
                        <a href="{% url 'browse' %}?product_type=auction" class="text-red-600 hover:text-red-700 font-semibold text-sm uppercase smooth-transition">
                            See All →
                        </a>
                    </div>
                    <div class="p-4">
                        <!-- Full Width Carousel -->
                        <div class="relative" x-data="featuredCarousel()">

                            <!-- Left Arrow -->
                            <button
                                @click="scrollLeft()"
                                class="absolute left-0 top-1/2 -translate-y-1/2 z-20 bg-white hover:bg-gray-50 border-2 border-gray-200 rounded-full p-4 shadow-lg transition"
                                x-show="!atStart"
                            >
                                <svg class="w-8 h-8 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M15 19l-7-7 7-7"></path>
                                </svg>
                            </button>

                            <!-- Products Container -->
                            <div
                                x-ref="container"
                                @scroll="checkScroll()"
                                class="overflow-hidden"
                            >
                                <div class="flex transition-transform duration-500" :style="`transform: translateX(-${currentIndex * 100}%)`">
                                    {% for product in auction_products %}
                                    <div class="w-full flex-shrink-0 px-12">
                                        <!-- Large Featured Product Card -->
                                        <div class="product-card bg-white rounded-lg overflow-hidden shadow-xl max-w-5xl mx-auto">
                                            <a href="{% url 'auction_detail' product.id %}" class="block">
                                                <div class="grid md:grid-cols-2 gap-6">
                                                    <!-- Product Image - Left Side -->
                                                    <div class="relative bg-gray-100 aspect-square overflow-hidden">
                                                        {% if product.main_image %}
                                                            <img src="{{ product.main_image.url }}" alt="{{ product.title }}" class="product-image w-full h-full object-cover">
                                                        {% else %}
                                                            <div class="product-image w-full h-full flex items-center justify-center bg-gradient-to-br from-red-100 to-red-200">
                                                                <svg class="w-32 h-32 text-red-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                                                </svg>
                                                            </div>
                                                        {% endif %}

                                                        <!-- Badges -->
                                                        <div class="absolute top-4 left-4 flex gap-2">
                                                            <span class="badge bg-red-600 text-white text-sm font-bold px-3 py-2 rounded-lg shadow-lg">
                                                                🔥 LIVE AUCTION
                                                            </span>
                                                            {% if product.status == 'active' %}
                                                            <span class="badge bg-red-500 text-white text-sm font-bold px-3 py-2 rounded-lg flex items-center gap-2 shadow-lg">
                                                                <span class="pulse-dot w-2 h-2 bg-white rounded-full"></span>
                                                                LIVE NOW
                                                            </span>
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    <!-- Product Info - Right Side -->
                                                    <div class="p-6 flex flex-col justify-center">
                                                        <!-- Title -->
                                                        <h3 class="text-3xl font-bold text-gray-900 mb-4 hover:text-red-600 smooth-transition">
                                                            {{ product.title }}
                                                        </h3>

                                                        <!-- Description -->
                                                        <p class="text-gray-600 mb-6 text-lg line-clamp-3">
                                                            {{ product.description|default:"Join this exciting auction and place your bid to win this amazing product!" }}
                                                        </p>

                                                        <!-- Pricing -->
                                                        <div class="bg-gradient-to-r from-red-50 to-orange-50 rounded-xl p-6 mb-6">
                                                            <div class="mb-4">
                                                                <span class="text-sm text-gray-600 uppercase tracking-wide">Starting Bid</span>
                                                                <div class="product-price text-4xl font-bold text-red-600 mt-1">
                                                                    KSh {{ product.base_price|floatformat:0|intcomma }}
                                                                </div>
                                                            </div>
                                                            <div class="flex items-center justify-between pt-4 border-t border-red-200">
                                                                <div>
                                                                    <span class="text-xs text-gray-600 uppercase">Entry Fee</span>
                                                                    <div class="text-xl font-bold text-orange-600">
                                                                        KSh {{ product.participation_fee|floatformat:0|intcomma }}
                                                                    </div>
                                                                </div>
                                                                <div class="text-right">
                                                                    <span class="text-xs text-gray-600 uppercase">Time Left</span>
                                                                    <div class="text-xl font-bold text-red-600">
                                                                        {% if product.end_time %}
                                                                            {{ product.end_time|timeuntil }}
                                                                        {% else %}
                                                                            Starting Soon
                                                                        {% endif %}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <!-- Stats -->
                                                        <div class="grid grid-cols-2 gap-4 mb-6">
                                                            <div class="bg-gray-50 rounded-lg p-4 text-center">
                                                                <div class="text-3xl font-bold text-gray-900">{{ product.get_participant_count|default:0 }}</div>
                                                                <div class="text-sm text-gray-600 uppercase mt-1">Total Bids</div>
                                                            </div>
                                                            <div class="bg-gray-50 rounded-lg p-4 text-center">
                                                                <div class="text-3xl font-bold text-red-600">LIVE</div>
                                                                <div class="text-sm text-gray-600 uppercase mt-1">Status</div>
                                                            </div>
                                                        </div>

                                                        <!-- CTA Button -->
                                                        <button class="w-full bg-gradient-to-r from-red-600 to-red-700 text-white py-4 rounded-xl font-bold text-lg hover:from-red-700 hover:to-red-800 transition shadow-lg transform hover:scale-105">
                                                            🎯 Place Your Bid Now
                                                        </button>
                                                    </div>
                                                </div>
                                            </a>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>

                            <!-- Right Arrow -->
                            <button
                                @click="scrollRight()"
                                class="absolute right-0 top-1/2 -translate-y-1/2 z-20 bg-white hover:bg-gray-50 border-2 border-gray-200 rounded-full p-4 shadow-lg transition"
                                x-show="!atEnd"
                            >
                                <svg class="w-8 h-8 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M9 5l7 7-7 7"></path>
                                </svg>
                            </button>

                            <!-- Dot Indicators -->
                            <div class="flex justify-center gap-2 mt-6">
                                {% for product in auction_products %}
                                <button
                                    @click="goToSlide({{ forloop.counter0 }})"
                                    class="w-3 h-3 rounded-full transition-all"
                                    :class="currentIndex === {{ forloop.counter0 }} ? 'bg-red-600 w-8' : 'bg-gray-300 hover:bg-gray-400'"
                                ></button>
                                {% endfor %}
                            </div>

                        </div>
                    </div>
                </section>
                {% endif %}

                <!-- ==================== BUY NOW SECTION (SECOND!) ==================== -->
                {% if buy_now_products %}
                <section class="bg-white rounded shadow-sm mb-4">
                    <div class="border-b px-4 py-3 flex items-center justify-between bg-blue-50">
                        <div class="flex items-center gap-2">
                            <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path>
                            </svg>
                            <h2 class="font-bold text-gray-900 uppercase">Buy Now - Instant Purchase</h2>
                        </div>
                        <a href="{% url 'browse' %}?product_type=buy_now" class="text-blue-600 hover:text-blue-700 font-semibold text-sm uppercase smooth-transition">
                            See All →
                        </a>
                    </div>
                    <div class="p-4">
                        <!-- Carousel with Arrows -->
                        <div class="carousel-wrapper" x-data="carousel()">

                            <!-- Left Arrow -->
                            <button
                                @click="scrollLeft()"
                                class="scroll-arrow left"
                                x-show="!atStart"
                            >
                                <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                                </svg>
                            </button>

                            <!-- Products Container -->
                            <div
                                x-ref="container"
                                @scroll="checkScroll()"
                                class="horizontal-scroll"
                            >
                                {% for product in buy_now_products %}
                                <div class="horizontal-scroll-item opacity-0 fade-in-up delay-{{ forloop.counter }}">
                                    <div class="product-card bg-white rounded-lg overflow-hidden h-full">
                                        <a href="{% url 'auction_detail' product.id %}" class="block">
                                            <!-- Product Image -->
                                            <div class="relative bg-gray-100 aspect-square overflow-hidden">
                                                {% if product.main_image %}
                                                    <img src="{{ product.main_image.url }}" alt="{{ product.title }}" class="product-image w-full h-full object-cover">
                                                {% else %}
                                                    <div class="product-image w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-100 to-blue-200">
                                                        <svg class="w-20 h-20 text-blue-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                                        </svg>
                                                    </div>
                                                {% endif %}

                                                <!-- Buy Now Badge -->
                                                <div class="absolute top-2 left-2">
                                                    <span class="badge bg-blue-600 text-white text-xs font-bold px-2 py-1 rounded shadow-lg">BUY NOW</span>
                                                </div>

                                                <!-- Stock Badge -->
                                                {% if product.stock_quantity %}
                                                <div class="absolute top-2 right-2">
                                                    <span class="badge text-white text-xs font-bold px-2 py-1 rounded shadow-lg {% if product.stock_quantity <= 5 %}low-stock-pulse{% else %}bg-green-600{% endif %}">
                                                        {{ product.stock_quantity }} left
                                                    </span>
                                                </div>
                                                {% endif %}

                                                <!-- Quick Add Button -->
                                                <div class="absolute bottom-0 left-0 right-0 p-2">
                                                    <button
                                                        @click.prevent="addToCart('{{ product.id }}', '{{ product.title|escapejs }}')"
                                                        class="quick-add-btn btn-ripple w-full bg-blue-600 text-white py-2 rounded-lg font-semibold hover:bg-blue-700 smooth-transition text-xs"
                                                    >
                                                        <span class="flex items-center justify-center gap-1">
                                                            <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path>
                                                            </svg>
                                                            Add to Cart
                                                        </span>
                                                    </button>
                                                </div>
                                            </div>

                                            <!-- Product Info -->
                                            <div class="p-3">
                                                <h3 class="text-sm text-gray-900 line-clamp-2 mb-2 h-10 smooth-transition hover:text-blue-600">{{ product.title }}</h3>
                                                <div class="mb-2">
                                                    <span class="product-price text-lg font-bold text-gray-900">KSh {{ product.buy_now_price|floatformat:0|intcomma }}</span>
                                                </div>

                                                <!-- Stock Status -->
                                                <div class="flex items-center justify-between text-xs pt-2 border-t smooth-transition">
                                                    {% if product.stock_quantity > 0 %}
                                                        <span class="text-green-600 font-semibold">✓ In Stock</span>
                                                        <span class="text-gray-500">{{ product.units_sold|default:0 }} sold</span>
                                                    {% else %}
                                                        <span class="text-red-600 font-semibold">Out of Stock</span>
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>

                            <!-- Right Arrow -->
                            <button
                                @click="scrollRight()"
                                class="scroll-arrow right"
                                x-show="!atEnd"
                            >
                                <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                            </button>

                        </div>
                    </div>
                </section>
                {% endif %}

                <!-- ==================== BOTH OPTIONS SECTION (THIRD!) ==================== -->
                {% if both_products %}
                <section class="bg-white rounded shadow-sm mb-4">
                    <div class="border-b px-4 py-3 flex items-center justify-between bg-purple-50">
                        <div class="flex items-center gap-2">
                            <svg class="w-5 h-5 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path>
                            </svg>
                            <h2 class="font-bold text-gray-900 uppercase">Both Options - You Decide</h2>
                        </div>
                        <a href="{% url 'browse' %}?product_type=both" class="text-purple-600 hover:text-purple-700 font-semibold text-sm uppercase smooth-transition">
                            See All →
                        </a>
                    </div>
                    <div class="p-4">
                        <!-- Carousel with Arrows -->
                        <div class="carousel-wrapper" x-data="carousel()">

                            <!-- Left Arrow -->
                            <button
                                @click="scrollLeft()"
                                class="scroll-arrow left"
                                x-show="!atStart"
                            >
                                <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                                </svg>
                            </button>

                            <!-- Products Container -->
                            <div
                                x-ref="container"
                                @scroll="checkScroll()"
                                class="horizontal-scroll"
                            >
                                {% for product in both_products %}
                                <div class="horizontal-scroll-item opacity-0 fade-in-up delay-{{ forloop.counter }}">
                                    <div class="product-card bg-white rounded-lg overflow-hidden h-full">
                                        <a href="{% url 'auction_detail' product.id %}" class="block">
                                            <!-- Product Image -->
                                            <div class="relative bg-gray-100 aspect-square overflow-hidden">
                                                {% if product.main_image %}
                                                    <img src="{{ product.main_image.url }}" alt="{{ product.title }}" class="product-image w-full h-full object-cover">
                                                {% else %}
                                                    <div class="product-image w-full h-full flex items-center justify-center bg-gradient-to-br from-purple-100 to-purple-200">
                                                        <svg class="w-20 h-20 text-purple-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                                        </svg>
                                                    </div>
                                                {% endif %}

                                                <!-- Both Badge -->
                                                <div class="absolute top-2 left-2">
                                                    <span class="badge bg-gradient-to-r from-blue-600 to-red-600 text-white text-xs font-bold px-2 py-1 rounded shadow-lg">BOTH OPTIONS</span>
                                                </div>

                                                <!-- Live Badge if active -->
                                                {% if product.status == 'active' %}
                                                <div class="absolute top-2 right-2">
                                                    <span class="badge bg-red-500 text-white text-xs font-bold px-2 py-1 rounded flex items-center gap-1 shadow-lg">
                                                        <span class="pulse-dot w-1.5 h-1.5 bg-white rounded-full"></span>
                                                        LIVE
                                                    </span>
                                                </div>
                                                {% endif %}
                                            </div>

                                            <!-- Product Info -->
                                            <div class="p-3">
                                                <h3 class="text-sm text-gray-900 line-clamp-2 mb-2 h-10 smooth-transition hover:text-purple-600">{{ product.title }}</h3>

                                                <!-- Dual Pricing -->
                                                <div class="space-y-1 mb-2">
                                                    <div class="flex items-center justify-between text-xs">
                                                        <span class="text-blue-600 font-semibold">Buy Now:</span>
                                                        <span class="font-bold text-gray-900">KSh {{ product.buy_now_price|floatformat:0|intcomma }}</span>
                                                    </div>
                                                    <div class="flex items-center justify-between text-xs">
                                                        <span class="text-red-600 font-semibold">Bid from:</span>
                                                        <span class="font-bold text-gray-900">KSh {{ product.base_price|floatformat:0|intcomma }}</span>
                                                    </div>
                                                </div>

                                                <!-- Stats -->
                                                <div class="flex items-center justify-between text-xs pt-2 border-t smooth-transition">
                                                    <span class="text-gray-500">
                                                        {% if product.stock_quantity %}
                                                            {{ product.stock_quantity }} left
                                                        {% endif %}
                                                    </span>
                                                    <span class="text-purple-600 font-semibold">
                                                        {{ product.get_participant_count|default:0 }} bids
                                                    </span>
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>

                            <!-- Right Arrow -->
                            <button
                                @click="scrollRight()"
                                class="scroll-arrow right"
                                x-show="!atEnd"
                            >
                                <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                            </button>

                        </div>
                    </div>
                </section>
                {% endif %}

                <!-- ALL PRODUCTS FALLBACK -->
                {% if not buy_now_products and not auction_products and not both_products %}
                    {% if featured_auctions %}
                    <section class="bg-white rounded shadow-sm">
                        <div class="border-b px-4 py-3 flex items-center justify-between">
                            <h2 class="font-bold text-gray-900 uppercase">All Products</h2>
                            <a href="{% url 'browse' %}" class="text-orange-500 hover:text-orange-600 font-semibold text-sm uppercase smooth-transition">
                                See All →
                            </a>
                        </div>
                        <div class="p-4">
                            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                                {% for product in featured_auctions %}
                                <div class="product-card bg-white rounded-lg overflow-hidden">
                                    <a href="{% url 'auction_detail' product.id %}" class="block">
                                        <div class="relative bg-gray-100 aspect-square overflow-hidden">
                                            {% if product.main_image %}
                                                <img src="{{ product.main_image.url }}" alt="{{ product.title }}" class="product-image w-full h-full object-cover">
                                            {% else %}
                                                <div class="product-image w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-200 to-gray-300">
                                                    <svg class="w-20 h-20 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                                    </svg>
                                                </div>
                                            {% endif %}
                                        </div>
                                        <div class="p-3">
                                            <h3 class="text-sm text-gray-900 line-clamp-2 mb-2 h-10 smooth-transition hover:text-orange-600">{{ product.title }}</h3>
                                            <div class="product-price text-lg font-bold text-gray-900">KSh {{ product.base_price|floatformat:0|intcomma }}</div>
                                        </div>
                                    </a>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                    </section>
                    {% else %}
                    <!-- Empty State -->
                    <div class="bg-white rounded shadow-sm p-12 text-center">
                        <svg class="mx-auto h-20 w-20 text-gray-300 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path>
                        </svg>
                        <h3 class="text-lg font-bold text-gray-900 mb-2">No Products Available</h3>
                        <p class="text-gray-500 text-sm mb-4">Check back soon for exciting products!</p>
                        {% if user.is_authenticated and user.user_type == 'seller' %}
                        <a href="{% url 'admin_panel:auction_create' %}" class="inline-block bg-orange-500 text-white px-6 py-3 rounded font-semibold hover:bg-orange-600 transition">
                            Create First Product
                        </a>
                        {% endif %}
                    </div>
                    {% endif %}
                {% endif %}

            </main>

            <!-- Right Sidebar - Widgets -->
            <aside class="w-72 flex-shrink-0 hidden xl:block">
                <!-- Marketplace Stats -->
                <div class="bg-gradient-to-br from-orange-500 to-red-500 text-white rounded shadow-sm p-4 mb-4">
                    <h3 class="font-bold mb-3 text-sm uppercase">Marketplace Stats</h3>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between items-center">
                            <span class="opacity-90">Active Auctions</span>
                            <span class="font-bold text-lg">{{ auction_products|length|default:0 }}</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="opacity-90">Products Available</span>
                            <span class="font-bold text-lg">{{ buy_now_products|length|default:0 }}</span>
                        </div>
                        <div class="flex justify-between items-center pt-2 border-t border-white border-opacity-20">
                            <span class="opacity-90">Total Listings</span>
                            <span class="font-bold text-xl">{{ featured_auctions|length|default:0 }}</span>
                        </div>
                    </div>
                </div>

                <!-- WhatsApp Widget -->
                <div class="bg-green-500 text-white rounded shadow-sm p-4 mb-4">
                    <div class="flex items-center gap-3 mb-2">
                        <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.890-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
                        </svg>
                        <div>
                            <div class="font-bold">WhatsApp</div>
                            <div class="text-xs">Quick Support</div>
                        </div>
                    </div>
                    <a href="https://wa.me/254711011011" target="_blank" class="block bg-white text-green-600 text-center py-2 rounded font-bold hover:bg-gray-100 transition text-sm">
                        CHAT NOW
                    </a>
                </div>

                <!-- Sell on BidMarket -->
                <div class="bg-gradient-to-br from-blue-600 to-purple-600 text-white rounded shadow-sm p-4 mb-4">
                    <div class="font-bold mb-2">SELL ON BIDMARKET</div>
                    <div class="text-sm mb-3 opacity-90">Reach thousands of buyers</div>
                    <a href="{% if user.is_authenticated %}{% url 'admin_panel:dashboard' %}{% else %}{% url 'signup' %}{% endif %}" class="block bg-white text-blue-600 text-center py-2 rounded font-bold hover:bg-gray-100 transition text-sm">
                        START SELLING
                    </a>
                </div>

                <!-- Help Widget -->
                <div class="bg-white rounded shadow-sm p-4">
                    <h3 class="font-bold text-gray-900 mb-3 text-sm uppercase">Need Help?</h3>
                    <div class="space-y-2 text-sm">
                        <a href="#" class="block text-gray-600 hover:text-orange-500 smooth-transition">Help Center</a>
                        <a href="#" class="block text-gray-600 hover:text-orange-500 smooth-transition">How to Buy</a>
                        <a href="#" class="block text-gray-600 hover:text-orange-500 smooth-transition">How to Bid</a>
                        <a href="#" class="block text-gray-600 hover:text-orange-500 smooth-transition">Payment Options</a>
                        <a href="#" class="block text-gray-600 hover:text-orange-500 smooth-transition">Track Delivery</a>
                        <a href="#" class="block text-gray-600 hover:text-orange-500 smooth-transition">Returns & Refunds</a>
                    </div>
                    <div class="mt-4 pt-4 border-t">
                        <div class="text-xs text-gray-500 mb-1">Call us:</div>
                        <div class="font-bold text-gray-900">0711 011 011</div>
                    </div>
                </div>
            </aside>

        </div>
    </div>

</div>

<script>
// Hero Carousel Component
function heroCarousel() {
    return {
        currentSlide: 0,
        totalSlides: {{ hero_slides|length|default:0 }},
        autoplayInterval: null,

        nextSlide() {
            this.currentSlide = (this.currentSlide + 1) % this.totalSlides;
        },

        previousSlide() {
            this.currentSlide = (this.currentSlide - 1 + this.totalSlides) % this.totalSlides;
        },

        goToSlide(index) {
            this.currentSlide = index;
        },

        startAutoplay() {
            if (this.totalSlides > 1) {
                this.autoplayInterval = setInterval(() => {
                    this.nextSlide();
                }, 4000); // Change slide every 4 seconds
            }
        },

        stopAutoplay() {
            if (this.autoplayInterval) {
                clearInterval(this.autoplayInterval);
            }
        }
    }
}

// Featured Full-Width Carousel (for Live Auctions)
function featuredCarousel() {
    return {
        currentIndex: 0,
        totalSlides: {{ auction_products|length|default:0 }},
        atStart: true,
        atEnd: false,

        init() {
            this.checkScroll();
        },

        scrollLeft() {
            if (this.currentIndex > 0) {
                this.currentIndex--;
                this.checkScroll();
            }
        },

        scrollRight() {
            if (this.currentIndex < this.totalSlides - 1) {
                this.currentIndex++;
                this.checkScroll();
            }
        },

        goToSlide(index) {
            this.currentIndex = index;
            this.checkScroll();
        },

        checkScroll() {
            this.atStart = this.currentIndex === 0;
            this.atEnd = this.currentIndex === this.totalSlides - 1;
        }
    }
}

// Horizontal Carousel with Arrow Navigation
function carousel() {
    return {
        atStart: true,
        atEnd: false,

        init() {
            this.$nextTick(() => {
                this.checkScroll();
            });
        },

        scrollLeft() {
            const container = this.$refs.container;
            const scrollAmount = container.offsetWidth * 0.9;
            container.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
        },

        scrollRight() {
            const container = this.$refs.container;
            const scrollAmount = container.offsetWidth * 0.9;
            container.scrollBy({ left: scrollAmount, behavior: 'smooth' });
        },

        checkScroll() {
            const container = this.$refs.container;
            this.atStart = container.scrollLeft <= 10;
            this.atEnd = container.scrollLeft >= (container.scrollWidth - container.offsetWidth - 10);
        }
    }
}
</script>

{% endblock %}